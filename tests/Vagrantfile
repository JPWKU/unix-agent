Vagrant.configure("2") do |config|

  config.vm.define 'ubuntu-12.04' do |c|
    c.berkshelf.berksfile_path = "./Berksfile"
    c.vm.box = "canonical-ubuntu-12.04"
    c.vm.box_url = "http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-vagrant-disk1.box"
  end

  config.vm.network :private_network, ip: "172.16.129.50"

  config.vm.provider "virtualbox" do |v|
    v.memory = 1024
  end

  vagrant_root = File.dirname(__FILE__)
  vagrant_root = File.dirname(vagrant_root)
  config.vm.synced_folder "../omnibus-dcm-agent/pkg/", "/agent/pkgs"
  config.vm.synced_folder "../src/", "/agent/src"

  config.vm.synced_folder "../", vagrant_root

  config.vm.provision "shell" do |s|
    s.path = "devel-provision.sh"
    s.args = vagrant_root
  end
end

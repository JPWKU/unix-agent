driver:
   name: ec2 
   aws_ssh_key_id: laptop
   ssh_key: /Users/bresnaha/.ssh/id_rsa
   region: us-east-1
   availability_zone: us-east-1b
   require_chef_omnibus: true
   flavor_id: m3.large

   synced_folders:
     - ['../', '/agent']

driver_config:
  require_chef_omnibus: latest

provisioner:
  name: chef_solo
  require_chef_omnibus: latest

platforms:
  - name: ubuntu-10.04
    driver:
      image_id: ami-1ab3ce73
      username: ubuntu
    run_list: apt::default

  - name: ubuntu-10.04-i386
    driver:
      image_id: ami-10e41778
      username: ubuntu
      flavor_id: c1.medium
    run_list: apt::default

  - name: ubuntu-12.04
    driver:
      image_id: ami-fd20ad94
      username: ubuntu
    run_list: apt::default

  - name: ubuntu-12.04-i386
    driver:
      image_id: ami-f87dba90
      username: ubuntu
      flavor_id: c1.medium
    run_list: apt::default

  - name: ubuntu-13.10
    driver:
      image_id: ami-7461a11c
      username: ubuntu
    run_list: apt::default

  - name: ubuntu-13.10-i386
    driver:
      image_id: ami-7261a11a
      username: ubuntu
      flavor_id: c1.medium
    run_list: apt::default

  - name: debian-6.0
    driver:
      image_id: ami-e00df089
      username: root
    run_list:
      - "recipe[build_dcm_pyagent::debrun]"

  - name: debian-7.6
    driver:
      image_id: ami-2c886c44
      username: admin
    run_list:
      - "recipe[build_dcm_pyagent::debrun]"

  - name: debian-7.6-i386
    driver:
      image_id: ami-90886cf8
      username: admin
      flavor_id: c1.medium
    run_list:
      - "recipe[build_dcm_pyagent::debrun]"

  - name: centos-6.4

suites:
  - name: default
    run_list: 
      - recipe[build-essential]
      - omnibus::default
      - "recipe[build_dcm_pyagent::s3cmd]"
      - "recipe[build_dcm_pyagent::gitcheckout]"
      - "recipe[build_dcm_pyagent::default]"
      - "recipe[build_dcm_pyagent::s3upload]"

    attributes:
      #omnibus:
      #  build_user:  ubuntu
      #  build_dir:   /home/ubuntu/dcm-agent
      #  install_dir: /opt/dcm-agent
      s3cmd:
        access_key: <%= ENV['AWS_ACCESS_KEY'] %>
        secret_key: <%= ENV['AWS_SECRET_KEY'] %>

      dcm:
        release_bucket: dcmagentunstable
        user: ubuntu
